import{o as f,r as o,O as A,j as s,B as S}from"./index-4Xp8Ba2F.js";import{A as j}from"./ArticleCard-CBazGrYu.js";import{P as L}from"./PaginationControls-ESlcZwPL.js";import{F as u}from"./index-BPGcWi37.js";import"./avatar-CMuPmUPM.js";import"./badge-DDms8UDH.js";import"./heart-Ci5w5lZQ.js";import"./ellipsis-Df_YqgoH.js";function y(){const{articles:t,loading:d}=f(),[g,p]=o.useState(0),[r,$]=o.useState(15),[h,C]=o.useState(1);let n=Math.ceil(t.length/r);const[m]=A(),a=m.get("search")||"",i=m.get("category")||"",c=o.useMemo(()=>!a&&!i?t:a?t.filter(e=>e.title.toLowerCase().includes(a.toLowerCase())||e.author.username.toLowerCase().includes(a.toLowerCase())):i?t.filter(e=>e.categories.some(l=>l.name.toLowerCase().includes(i.toLowerCase()))):t,[t,a]),P=o.useMemo(()=>{const e=g,l=e+r;return c.slice(e,l)},[c,g,r]);n=Math.ceil(c.length/r);const x=e=>{C(e),p((e-1)*r)};return s.jsxs("div",{className:"mx-auto p-8 min-h-[55vh]",children:[s.jsx(u,{cascade:!0,triggerOnce:!0,duration:500,children:s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 ",children:s.jsx(u,{cascade:!0,damping:.05,triggerOnce:!0,duration:700,children:P.map(e=>s.jsx(j,{imageSrc:e.banner===null?`https://api.dicebear.com/9.x/shapes/svg?seed=${e.title}`:`${S}${e.banner}`,imageAlt:e.title,title:e.title,description:e.content.replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/^#{1,6}\s+/gm,"").replace(/^(\s*[-*+]|\d+\.)\s+/gm,"").replace(/(\*\*|__|\*|_)/g,"").replace(/`([^`]+)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/^>\s+/gm,"").replace(/[\r\n]+/g," ").substring(0,150)+"...",authorName:e.author?.username,authorAvatarSrc:`https://api.dicebear.com/9.x/notionists-neutral/svg?seed=${e.author?.username}`,readTime:`${Math.ceil(e.content.split(" ").length/200)} min`,likeCount:e.likeCount||0,date:new Date(e.createdAt).toLocaleDateString("es-ES"),articleId:e.id},e.id))})})}),!d&&n>1&&s.jsx(L,{currentPage:h,totalPages:n,onPageChange:x})]})}export{y as default};
